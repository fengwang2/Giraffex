language: csharp
sudo: required
dist: trusty

dotnet: 2.1.500

mono:
  - 4.6.1
  - 4.8.1
  - 5.16.0

os:
  - linux

env:
  - PACKAGE_VERSION="1.0.*"

before_script:
  - curl https://packages.microsoft.com/keys/microsoft.asc | sudo apt-key add -
  - curl https://packages.microsoft.com/config/ubuntu/14.04/prod.list | sudo tee /etc/apt/sources.list.d/microsoft.list
  - sudo apt-get update
  - sudo apt-get install -y powershell

script:
  - pwsh ./.psscripts/install-dotnet.ps1
  - export FrameworkPathOverride=$(dirname $(which mono))/../lib/mono/4.5/
  - pwsh ./build.ps1 -Release